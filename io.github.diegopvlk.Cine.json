{
  "id": "io.github.diegopvlk.Cine",
  "runtime": "org.gnome.Platform",
  "runtime-version": "49",
  "sdk": "org.gnome.Sdk",
  "command": "cine",
  "finish-args": [
    "--share=ipc",
    "--socket=fallback-x11",
    "--device=dri",
    "--socket=wayland",
    "--socket=pulseaudio",
    "--filesystem=xdg-pictures/Cine Screenshots:create",
    "--filesystem=xdg-run/pipewire-0:ro",
    "--filesystem=xdg-run/gvfs",
    "--filesystem=xdg-run/gvfsd",
    "--talk-name=org.gtk.vfs.*",
    "--env=LC_NUMERIC=C"
  ],
  "cleanup": [
    "/include",
    "/lib/pkgconfig",
    "/man",
    "/share/doc",
    "/share/gtk-doc",
    "/share/man",
    "/share/pkgconfig",
    "*.la",
    "*.a"
  ],
  "modules": [
    {
      "name": "libmpv",
      "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/share/applications",
        "/share/bash-completion",
        "/share/doc",
        "/share/icons",
        "/share/man",
        "/share/zsh"
      ],
      "buildsystem": "meson",
      "config-opts": [
        "-Dlibmpv=true",
        "-Dbuild-date=false",
        "-Dalsa=disabled",
        "-Dlua=enabled"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/mpv-player/mpv/archive/v0.41.0.tar.gz",
          "sha256": "ee21092a5ee427353392360929dc64645c54479aefdb5babc5cfbb5fad626209",
          "x-checker-data": {
            "type": "anitya",
            "project-id": 5348,
            "stable-only": true,
            "url-template": "https://github.com/mpv-player/mpv/archive/v$version.tar.gz",
            "is-important": true
          }
        }
      ],
      "modules": [
        "shared-modules/lua5.1/lua-5.1.5.json",
        {
          "name": "libopenmpt",
          "config-opts": [
            "--disable-static",
            "--disable-tests",
            "--disable-examples",
            "--disable-openmpt123",
            "--disable-doxygen-doc",
            "--without-portaudio"
          ],
          "cleanup": [
            "/include",
            "/lib/pkgconfig",
            "/lib/*.la",
            "/share/doc"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://lib.openmpt.org/files/libopenmpt/src/libopenmpt-0.8.4+release.autotools.tar.gz",
              "sha256": "627f9bf11aacae615a1f2c982c7e88cb21f11b2d6f0267946f7c82c5eae4943b",
              "x-checker-data": {
                "type": "anitya",
                "project-id": 141468,
                "stable-only": true,
                "url-template": "https://lib.openmpt.org/files/libopenmpt/src/libopenmpt-$version+release.autotools.tar.gz"
              }
            }
          ]
        },
        {
          "name": "ffmpeg",
          "cleanup": [
            "/include",
            "/lib/pkgconfig",
            "/share/ffmpeg/examples"
          ],
          "config-opts": [
            "--enable-shared",
            "--disable-static",
            "--enable-gnutls",
            "--enable-gpl",
            "--disable-doc",
            "--disable-programs",
            "--disable-encoders",
            "--disable-muxers",
            "--enable-encoder=png",
            "--enable-encoder=libjxl",
            "--enable-libv4l2",
            "--enable-libdav1d",
            "--enable-libjxl",
            "--enable-libopenmpt"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://ffmpeg.org/releases/ffmpeg-8.0.1.tar.xz",
              "sha256": "05ee0b03119b45c0bdb4df654b96802e909e0a752f72e4fe3794f487229e5a41",
              "x-checker-data": {
                "type": "anitya",
                "project-id": 5405,
                "stable-only": true,
                "url-template": "https://ffmpeg.org/releases/ffmpeg-$version.tar.xz",
                "is-important": true
              }
            }
          ]
        },
        {
          "name": "libass",
          "cleanup": [
            "/include",
            "/lib/*.la",
            "/lib/pkgconfig"
          ],
          "config-opts": [
            "--disable-static"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://github.com/libass/libass/releases/download/0.17.4/libass-0.17.4.tar.xz",
              "sha256": "78f1179b838d025e9c26e8fef33f8092f65611444ffa1bfc0cfac6a33511a05a",
              "x-checker-data": {
                "type": "anitya",
                "project-id": 1560,
                "stable-only": true,
                "url-template": "https://github.com/libass/libass/releases/download/$version/libass-$version.tar.xz"
              }
            }
          ]
        },
        {
          "name": "uchardet",
          "buildsystem": "cmake-ninja",
          "config-opts": [
            "-DCMAKE_BUILD_TYPE=Release",
            "-DBUILD_STATIC=0",
            "-DCMAKE_POLICY_VERSION_MINIMUM=3.5"
          ],
          "cleanup": [
            "/bin",
            "/include",
            "/lib/pkgconfig",
            "/share/man",
            "/lib/cmake"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://www.freedesktop.org/software/uchardet/releases/uchardet-0.0.8.tar.xz",
              "sha256": "e97a60cfc00a1c147a674b097bb1422abd9fa78a2d9ce3f3fdcc2e78a34ac5f0",
              "x-checker-data": {
                "type": "anitya",
                "project-id": 9265,
                "stable-only": true,
                "url-template": "https://www.freedesktop.org/software/uchardet/releases/uchardet-$version.tar.xz"
              }
            }
          ]
        },
        {
          "name": "rubberband",
          "buildsystem": "meson",
          "config-opts": [
            "-Ddefault_library=shared"
          ],
          "cleanup": [
            "/bin",
            "/include",
            "/lib/pkgconfig",
            "/lib/ladspa"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://breakfastquay.com/files/releases/rubberband-4.0.0.tar.bz2",
              "sha256": "af050313ee63bc18b35b2e064e5dce05b276aaf6d1aa2b8a82ced1fe2f8028e9",
              "x-checker-data": {
                "type": "anitya",
                "project-id": 4222,
                "stable-only": true,
                "url-template": "https://breakfastquay.com/files/releases/rubberband-$version.tar.bz2"
              }
            }
          ]
        },
        {
          "name": "mujs",
          "cleanup": [
            "/bin",
            "/include",
            "/lib/pkgconfig",
            "/lib/libmujs.a"
          ],
          "no-autogen": true,
          "make-args": [
            "release",
            "prefix=/app"
          ],
          "make-install-args": [
            "prefix=/app",
            "install-shared"
          ],
          "sources": [
            {
              "type": "git",
              "url": "https://codeberg.org/ccxvii/mujs.git",
              "tag": "1.3.8",
              "commit": "307f18c4216420f2f56e22d8e7040baa39a6304a",
              "x-checker-data": {
                "type": "git",
                "tag-pattern": "^([\\d.]+)$"
              }
            },
            {
              "type": "file",
              "url": "https://www.unicode.org/Public/16.0.0/ucd/UnicodeData.txt",
              "sha256": "ff58e5823bd095166564a006e47d111130813dcf8bf234ef79fa51a870edb48f"
            },
            {
              "type": "file",
              "url": "https://www.unicode.org/Public/16.0.0/ucd/SpecialCasing.txt",
              "sha256": "8d5de354eef79f2395a54c9c7dcebbaf3d30fc962d0f85611ea97aa973a0c451"
            }
          ]
        },
        {
          "name": "libplacebo",
          "buildsystem": "meson",
          "cleanup": [
            "/include",
            "/lib/pkgconfig"
          ],
          "sources": [
            {
              "type": "git",
              "url": "https://github.com/haasn/libplacebo.git",
              "commit": "3188549fba13bbdf3a5a98de2a38c2e71f04e21e",
              "tag": "v7.351.0",
              "x-checker-data": {
                "type": "git",
                "tag-pattern": "^v([\\d.]+)$"
              }
            },
            {
              "type": "patch",
              "path": "libplacebo-vulkan-python-xml.patch"
            }
          ]
        }
      ]
    },
    {
      "name": "python-mpv",
      "buildsystem": "simple",
      "build-commands": [
        "pip3 install --no-index --no-build-isolation --find-links=. --prefix=/app python_mpv-1.0.8.tar.gz"
      ],
      "sources": [
        {
          "type": "file",
          "url": "https://files.pythonhosted.org/packages/77/bc/6aa34c8805ff62e2fefc7d171563c60598aac215d5241186031a2c839935/python_mpv-1.0.8.tar.gz",
          "sha256": "017fa359da059c831a94c419083491903e6d2f7c81b9841c33c196cabf4b3fe3"
        }
      ]
    },
    {
      "name": "cine",
      "builddir": true,
      "buildsystem": "meson",
      "sources": [
        {
			"type": "git",
			"url": "https://github.com/diegopvlk/Cine",
			"tag": "v1.0.0" 
		}
      ]
    }
  ]
}
